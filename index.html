<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Analytics Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
    h1 { font-size: 24px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
    th, td { padding: 10px; border-bottom: 1px solid #ddd; }
    th { background: #eee; }
  </style>
</head>
<body>
  <h1>ðŸ“Š Website Analytics</h1>
  <table>
    <thead>
      <tr>
        <th>URL</th>
        <th>Referrer</th>
        <th>User Agent</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody id="analyticsTable"></tbody>
  </table>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script>
    // dashboard.js

// âœ… Replace with your Firebase config
  const firebaseConfig = {
  apiKey: "AIzaSyCy3wdI31dGW869qdPg08-KDuVmEyICILE",
  authDomain: "web--analytics.firebaseapp.com",
  projectId: "web--analytics",
  storageBucket: "web--analytics.firebasestorage.app",
  messagingSenderId: "740756570650",
  appId: "1:740756570650:web:d352ca5bcb75a9bcf947a3",
  databaseURL: "https://web--analytics-default-rtdb.asia-southeast1.firebasedatabase.app/"
};


if (!firebase.apps?.length) {
  firebase.initializeApp(firebaseConfig);
}

const db = firebase.database();
const tableBody = document.getElementById("analyticsTable");

// Change siteId to the same one you used in <script data-site="">
const siteId = "mysite123";

// Listen for new visits
db.ref("analytics/" + siteId).on("child_added", (snapshot) => {
  const data = snapshot.val();
  const row = document.createElement("tr");
  row.innerHTML = `
    <td>${data.url}</td>
    <td>${data.referrer}</td>
    <td>${data.userAgent}</td>
    <td>${new Date(data.timestamp).toLocaleString()}</td>
  `;
  tableBody.appendChild(row);
});

  </script>
</body>
</html>
